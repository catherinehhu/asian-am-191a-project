<!DOCTYPE html>
<html>
    <head>
        <title>Neighborhood Oil Drilling Health Effects</title>
        <!-- hint: remember to change your page title! -->
        <meta charset="utf-8" />
        <link rel="shortcut icon" href="#">
        <link rel="stylesheet" href="styles/style.css">

        <!-- Leaflet's css-->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

        <!-- Leaflet's JavaScript-->
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
        
        <!-- Cluster Marker's CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
        <!-- Cluster Marker's JavaScript -->
        <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

        <script src="https://d3js.org/d3.v4.js"></script>


        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Jost&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend&family=Open+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    </head>

    <body>
        <header>
            <nav>
                <ul>
                  <li><a href="index.html">Home</a></li>
                  <li><a href="survey.html">Take the Survey</a></li>
                  <li><a href="about.html">About This Project</a></li>
                </ul>
              </nav>         
            </header>
            
            <div id="title">           
                 
                <h2> Community Narratives: Neighborhood Oil Drilling </h2>
              </div>  

                          <!-- modal (pop up) -->
            <div id="myModal" class="modal2">

                <div class="modal-content2">
                    
                    <span class="close">&times;</span>
                    <center><h1 style="font-size: 30px;">Welcome to Our Site! Health Effects Of Oil Drilling in Los Angeles</span></h1></center>
                    <center><h2> We hope to empower those living near the Inglewood Oil Field in LA. </h2></center>
                    <p style="font-size: 16px;"> This project seeks to serve the communities and individuals living near the Inglewood Oil field 
                        who are exposed to deadly toxins on a daily basis and, as a result, may develop negative health effects. We seek to accomplish 
                        this through a short survey that any community member can take in English or Spanish. After taking the survey, the responses will 
                        be recorded on our site and will be mapped based on the particpants zip code. 
                    <p><b>
                     To particpate in the project</b>, click on the, "Take the Survey" tab or click below. After taking the survey, your response will 
                    be publicly displayed on our map.  
                    When interacting on the site, the "summary" tab will display demographic information on a specific zip code, along with a respondent sentiment chart. 
                    The "Stories" tab will display the responses from other particpants. The intensity of the <span style="font-weight: bold; color: #ad2d2d">Color Red</span> 
                  represents the number of responses in each zip code.
                    </p>
                        </br></br></br>
                        <a href="survey.html"><span style="font-weight: bold; color: #ad2d2d">Click here</span></a>
            
                        to take the survey and start mapping. </br>
                    </p>
                        
                </div>
            </div>

        <div class="main">
             
            <div id="the_map">
            </div> 
            
            <div class="panel">
                    <div id = "buttons">
                        <button class="tablinks" onclick="openTab(event, 'summary')" id="defaultOpen">Summary</button>
                        <button class="tablinks" onclick="openTab(event, 'stories')">Stories</button>
                    </div>
                    <div id = "content">
                        <div id="summary" class="tabcontent">


                        </div>
                        <div id="stories" class="tabcontent">
                            <p>stories.</p> 
                        </div>
                    </div>

            </div>

        </div>
        <div id="footer">
            Copyright (2023)
            <p>CONTACT INFO HERE</p>
        </div>
        <script src="js/script.js"></script>
        <script>

// set the dimensions and margins of the graph
var width = 450
    height = 450
    margin = 40

// The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
var radius = Math.min(width, height) / 2 - margin

// append the svg object to the div called 'my_dataviz'
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

// Create dummy data
var data = {a: 9, b: 20, c:30, d:8, e:12}

// set the color scale
var color = d3.scaleOrdinal()
  .domain(data)
  .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56"])

// Compute the position of each group on the pie:
var pie = d3.pie()
  .value(function(d) {return d.value; })
var data_ready = pie(d3.entries(data))

// Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
svg
  .selectAll('whatever')
  .data(data_ready)
  .enter()
  .append('path')
  .attr('d', d3.arc()
    .innerRadius(0)
    .outerRadius(radius)
  )
  .attr('fill', function(d){ return(color(d.data.key)) })
  .attr("stroke", "black")
  .style("stroke-width", "2px")
  .style("opacity", 0.7)

</script>
    </body>
</html>
