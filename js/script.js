var zips = {
    "type": "FeatureCollection",
    "name": "ca_zipcodes",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
{ "type": "Feature", "properties": { "OBJECTID_1": 1616, "objectid": 1616, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90232", "zcta_key": "0690232", "latitude": 34.01876606, "longitude": -118.39174818, "tot_pop": 15149, "age_under5": 761, "age_5to9": 775, "age_10to14": 734, "age_15to19": 788, "age_20to24": 924, "age_25to29": 1371, "age_30to34": 1356, "age_35to39": 1243, "age_40to44": 1197, "age_45to49": 1193, "age_50to54": 1113, "age_55to59": 945, "age_60to64": 842, "age_65to69": 509, "age_70to74": 387, "age_75to79": 310, "age_80to84": 276, "age_85_ove": 425, "age16_over": 12717, "age18_over": 12383, "age21_over": 11945, "age62_over": 2381, "age65_over": 1907, "male": 7333, "female": 7816, "age_median": 38.6, "age_medi_1": 36.9, "age_medi_2": 40.0, "one_race": 14185, "white": 9201, "black_afam": 981, "amind_alan": 71, "asian": 2294, "nathaw_isl": 40, "other_race": 1598, "multi_race": 964, "hispanic_l": 3932, "non_hisp_l": 11217, "white_nhl": 7261, "black_af_1": 946, "amind_al_1": 22, "asian_nhl": 2263, "nathaw_i_1": 36, "other_nhl": 84, "multi_ra_1": 605, "tot_in_hou": 15089, "tot_in_gc": 60, "gc_inst": 0, "gc_noninst": 60, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 0, "gc_other": 0, "hh_total": 6605, "hh_family": 3452, "hh_nonfaml": 3153, "hh_nonfami": 2345, "hh_nonfa_1": 996, "hh_nonfa_2": 170, "hh_nonfa_3": 1349, "hh_nonfa_4": 474, "hh_with_un": 1678, "hh_with_65": 1491, "hu_total": 6944, "hu_occ": 6605, "hu_vac": 339, "hu_vac_ren": 178, "hu_vac_sea": 34, "hu_occ_own": 2453, "hu_occ_o_1": 6425, "hu_occ_ren": 4152, "hu_occ_r_1": 8664, "Shape_Length": 0.1906868168771868, "Shape_Area": 0.00055807408120804938, "InPoly_FID": 1615, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.410012000153642, 34.005693999578455 ], [ -118.402769999835584, 34.014117000399324 ], [ -118.394794999889314, 34.008263999384098 ], [ -118.392433999829223, 34.010926999881178 ], [ -118.396396999122203, 34.016712000458483 ], [ -118.391727000500623, 34.011896999646865 ], [ -118.391062999557732, 34.013983000515111 ], [ -118.39223700063701, 34.009008999565708 ], [ -118.396144999192302, 34.007153999457557 ], [ -118.393420999479531, 34.004140999907293 ], [ -118.387996999361974, 34.016748000320035 ], [ -118.380838000173526, 34.011747999970282 ], [ -118.373093000041877, 34.011913000384709 ], [ -118.372626999236616, 34.018471000636225 ], [ -118.385227000225825, 34.019673999455563 ], [ -118.377951999285301, 34.021970000115459 ], [ -118.376220000352703, 34.028645999513344 ], [ -118.371900999931142, 34.029929000223206 ], [ -118.369576999778701, 34.035080000341793 ], [ -118.388339999891059, 34.029485000432487 ], [ -118.41692000035772, 34.012886999435523 ], [ -118.410012000153642, 34.005693999578455 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 623, "objectid": 623, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90034", "zcta_key": "0690034", "latitude": 34.03069097, "longitude": -118.39946556, "tot_pop": 57964, "age_under5": 3221, "age_5to9": 2599, "age_10to14": 2492, "age_15to19": 2648, "age_20to24": 5123, "age_25to29": 8567, "age_30to34": 7172, "age_35to39": 5278, "age_40to44": 4190, "age_45to49": 3651, "age_50to54": 3270, "age_55to59": 2899, "age_60to64": 2382, "age_65to69": 1480, "age_70to74": 1002, "age_75to79": 770, "age_80to84": 585, "age_85_ove": 635, "age16_over": 49150, "age18_over": 48117, "age21_over": 46307, "age62_over": 5813, "age65_over": 4472, "male": 28828, "female": 29136, "age_median": 32.8, "age_medi_1": 32.3, "age_medi_2": 33.3, "one_race": 54813, "white": 28752, "black_afam": 6105, "amind_alan": 501, "asian": 11112, "nathaw_isl": 154, "other_race": 8189, "multi_race": 3151, "hispanic_l": 17228, "non_hisp_l": 40736, "white_nhl": 21322, "black_af_1": 5836, "amind_al_1": 116, "asian_nhl": 10958, "nathaw_i_1": 137, "other_nhl": 351, "multi_ra_1": 2016, "tot_in_hou": 57112, "tot_in_gc": 852, "gc_inst": 180, "gc_noninst": 672, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 180, "gc_other": 0, "hh_total": 25592, "hh_family": 11776, "hh_nonfaml": 13816, "hh_nonfami": 9371, "hh_nonfa_1": 4566, "hh_nonfa_2": 500, "hh_nonfa_3": 4805, "hh_nonfa_4": 901, "hh_with_un": 5773, "hh_with_65": 3464, "hu_total": 27210, "hu_occ": 25592, "hu_vac": 1618, "hu_vac_ren": 1258, "hu_vac_sea": 78, "hu_occ_own": 4956, "hu_occ_o_1": 12703, "hu_occ_ren": 20636, "hu_occ_r_1": 44409, "Shape_Length": 0.16178559050490024, "Shape_Area": 0.0007625920630575494, "InPoly_FID": 622, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.370496999936563, 34.041409999971563 ], [ -118.400537999429105, 34.045874999931357 ], [ -118.398360000613479, 34.041110000526146 ], [ -118.403201999972282, 34.029545999648235 ], [ -118.4170700000804, 34.031704000239472 ], [ -118.425438999310359, 34.028634000758586 ], [ -118.427298000502276, 34.025671000816089 ], [ -118.429917999915745, 34.026860999935252 ], [ -118.418234999845311, 34.012109000430087 ], [ -118.41692000035772, 34.012886999435523 ], [ -118.388339999891059, 34.029485000432487 ], [ -118.369576999778701, 34.035080000341793 ], [ -118.372649000251101, 34.035824999624083 ], [ -118.368791999551092, 34.038164999615105 ], [ -118.369801000215944, 34.040018999677159 ], [ -118.370496999936563, 34.041409999971563 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 1375, "objectid": 1375, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90230", "zcta_key": "0690230", "latitude": 33.99724232, "longitude": -118.39459535, "tot_pop": 31766, "age_under5": 1821, "age_5to9": 1829, "age_10to14": 1831, "age_15to19": 1947, "age_20to24": 1790, "age_25to29": 2290, "age_30to34": 2345, "age_35to39": 2485, "age_40to44": 2375, "age_45to49": 2359, "age_50to54": 2313, "age_55to59": 2036, "age_60to64": 1757, "age_65to69": 1366, "age_70to74": 1034, "age_75to79": 809, "age_80to84": 700, "age_85_ove": 679, "age16_over": 25885, "age18_over": 25071, "age21_over": 24007, "age62_over": 5608, "age65_over": 4588, "male": 14932, "female": 16834, "age_median": 39.1, "age_medi_1": 36.7, "age_medi_2": 41.2, "one_race": 29960, "white": 17175, "black_afam": 3299, "amind_alan": 191, "asian": 4661, "nathaw_isl": 88, "other_race": 4546, "multi_race": 1806, "hispanic_l": 10325, "non_hisp_l": 21441, "white_nhl": 12197, "black_af_1": 3189, "amind_al_1": 62, "asian_nhl": 4587, "nathaw_i_1": 82, "other_nhl": 176, "multi_ra_1": 1148, "tot_in_hou": 31621, "tot_in_gc": 145, "gc_inst": 100, "gc_noninst": 45, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 100, "gc_other": 0, "hh_total": 12883, "hh_family": 7669, "hh_nonfaml": 5214, "hh_nonfami": 4020, "hh_nonfa_1": 1435, "hh_nonfa_2": 342, "hh_nonfa_3": 2585, "hh_nonfa_4": 1073, "hh_with_un": 3828, "hh_with_65": 3475, "hu_total": 13344, "hu_occ": 12883, "hu_vac": 461, "hu_vac_ren": 205, "hu_vac_sea": 32, "hu_occ_own": 7453, "hu_occ_o_1": 17482, "hu_occ_ren": 5430, "hu_occ_r_1": 14139, "Shape_Length": 0.22524402955860504, "Shape_Area": 0.0011540846778822901, "InPoly_FID": 1374, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.40925599946479, 33.987301999487727 ], [ -118.413497999932702, 33.98503200002682 ], [ -118.40976200031605, 33.983907999454686 ], [ -118.409085999719082, 33.981246999949121 ], [ -118.402767999743332, 33.983981000123094 ], [ -118.397634999555578, 33.982093000291798 ], [ -118.386403999644813, 33.977089999803695 ], [ -118.378646999859143, 33.988989999988576 ], [ -118.379203000318171, 33.996427000305857 ], [ -118.369448000125089, 33.998072000622358 ], [ -118.372864000273353, 34.004335999906516 ], [ -118.373093000041877, 34.011913000384709 ], [ -118.380838000173526, 34.011747999970282 ], [ -118.387996999361974, 34.016748000320035 ], [ -118.393420999479531, 34.004140999907293 ], [ -118.396144999192302, 34.007153999457557 ], [ -118.39223700063701, 34.009008999565708 ], [ -118.391062999557732, 34.013983000515111 ], [ -118.391727000500623, 34.011896999646865 ], [ -118.396396999122203, 34.016712000458483 ], [ -118.392433999829223, 34.010926999881178 ], [ -118.394794999889314, 34.008263999384098 ], [ -118.402769999835584, 34.014117000399324 ], [ -118.410012000153642, 34.005693999578455 ], [ -118.41692000035772, 34.012886999435523 ], [ -118.418234999845311, 34.012109000430087 ], [ -118.414652000089688, 34.004261000045176 ], [ -118.412267999868277, 34.003296999656868 ], [ -118.413282999910507, 34.005513000224823 ], [ -118.411242999364902, 34.002934000004132 ], [ -118.417754000146942, 33.994844000150522 ], [ -118.419121000233929, 33.989600999386653 ], [ -118.415305999672114, 33.988891999965858 ], [ -118.415553000270734, 33.986706000781339 ], [ -118.41159699950191, 33.989756999386088 ], [ -118.40925599946479, 33.987301999487727 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 86, "objectid": 86, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90056", "zcta_key": "0690056", "latitude": 33.9880467, "longitude": -118.37036082, "tot_pop": 7827, "age_under5": 297, "age_5to9": 316, "age_10to14": 460, "age_15to19": 468, "age_20to24": 331, "age_25to29": 359, "age_30to34": 320, "age_35to39": 426, "age_40to44": 486, "age_45to49": 669, "age_50to54": 707, "age_55to59": 610, "age_60to64": 649, "age_65to69": 472, "age_70to74": 427, "age_75to79": 315, "age_80to84": 246, "age_85_ove": 269, "age16_over": 6655, "age18_over": 6446, "age21_over": 6218, "age62_over": 2093, "age65_over": 1729, "male": 3436, "female": 4391, "age_median": 48.4, "age_medi_1": 46.7, "age_medi_2": 49.5, "one_race": 7416, "white": 1050, "black_afam": 5931, "amind_alan": 20, "asian": 255, "nathaw_isl": 3, "other_race": 157, "multi_race": 411, "hispanic_l": 455, "non_hisp_l": 7372, "white_nhl": 896, "black_af_1": 5828, "amind_al_1": 14, "asian_nhl": 253, "nathaw_i_1": 2, "other_nhl": 30, "multi_ra_1": 349, "tot_in_hou": 7811, "tot_in_gc": 16, "gc_inst": 8, "gc_noninst": 8, "gc_correct": 0, "gc_juv": 4, "gc_nurs": 4, "gc_other": 0, "hh_total": 3371, "hh_family": 2165, "hh_nonfaml": 1206, "hh_nonfami": 1025, "hh_nonfa_1": 337, "hh_nonfa_2": 113, "hh_nonfa_3": 688, "hh_nonfa_4": 306, "hh_with_un": 866, "hh_with_65": 1291, "hu_total": 3518, "hu_occ": 3371, "hu_vac": 147, "hu_vac_ren": 73, "hu_vac_sea": 6, "hu_occ_own": 2248, "hu_occ_o_1": 5462, "hu_occ_ren": 1123, "hu_occ_r_1": 2349, "Shape_Length": 0.10340272791151019, "Shape_Area": 0.00039603204841923579, "InPoly_FID": 85, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.357888000330945, 33.997112000418554 ], [ -118.369448000125089, 33.998072000622358 ], [ -118.379203000318171, 33.996427000305857 ], [ -118.378646999859143, 33.988989999988576 ], [ -118.386403999644813, 33.977089999803695 ], [ -118.371782000738733, 33.977318999572219 ], [ -118.370231000260446, 33.979929000323182 ], [ -118.370340999937184, 33.981636000800847 ], [ -118.358544000005566, 33.981666999532479 ], [ -118.357888000330945, 33.997112000418554 ] ], [ [ -118.371805000000734, 33.98205799957708 ], [ -118.371801999862384, 33.979847000138989 ], [ -118.37446399941399, 33.979710000116484 ], [ -118.376770999681867, 33.982657000220456 ], [ -118.371805000000734, 33.98205799957708 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 1379, "objectid": 1379, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90043", "zcta_key": "0690043", "latitude": 33.98885577, "longitude": -118.33522664, "tot_pop": 44789, "age_under5": 2676, "age_5to9": 2841, "age_10to14": 3193, "age_15to19": 3556, "age_20to24": 3023, "age_25to29": 2644, "age_30to34": 2555, "age_35to39": 2691, "age_40to44": 3161, "age_45to49": 3427, "age_50to54": 3460, "age_55to59": 2940, "age_60to64": 2323, "age_65to69": 1913, "age_70to74": 1563, "age_75to79": 1205, "age_80to84": 830, "age_85_ove": 788, "age16_over": 35377, "age18_over": 33920, "age21_over": 31870, "age62_over": 7573, "age65_over": 6299, "male": 20561, "female": 24228, "age_median": 38.7, "age_medi_1": 35.6, "age_medi_2": 40.8, "one_race": 42867, "white": 4923, "black_afam": 29500, "amind_alan": 273, "asian": 380, "nathaw_isl": 39, "other_race": 7752, "multi_race": 1922, "hispanic_l": 13049, "non_hisp_l": 31740, "white_nhl": 1002, "black_af_1": 28877, "amind_al_1": 71, "asian_nhl": 359, "nathaw_i_1": 33, "other_nhl": 274, "multi_ra_1": 1124, "tot_in_hou": 44384, "tot_in_gc": 405, "gc_inst": 187, "gc_noninst": 218, "gc_correct": 0, "gc_juv": 37, "gc_nurs": 93, "gc_other": 57, "hh_total": 16075, "hh_family": 10647, "hh_nonfaml": 5428, "hh_nonfami": 4664, "hh_nonfa_1": 1878, "hh_nonfa_2": 626, "hh_nonfa_3": 2786, "hh_nonfa_4": 1215, "hh_with_un": 5802, "hh_with_65": 5062, "hu_total": 17172, "hu_occ": 16075, "hu_vac": 1097, "hu_vac_ren": 586, "hu_vac_sea": 18, "hu_occ_own": 8201, "hu_occ_o_1": 24201, "hu_occ_ren": 7874, "hu_occ_r_1": 20183, "Shape_Length": 0.15762900799749366, "Shape_Area": 0.001035428944087916, "InPoly_FID": 1378, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.34327799928019, 34.001357999272273 ], [ -118.353523999632841, 34.002512000328579 ], [ -118.357888000330945, 33.997112000418554 ], [ -118.358544000005566, 33.981666999532479 ], [ -118.335185999334385, 33.981758000131663 ], [ -118.335210000441123, 33.974446999329587 ], [ -118.333024000357284, 33.972696000420115 ], [ -118.333030000633983, 33.967249000141294 ], [ -118.326479999852097, 33.96726700007207 ], [ -118.326470999437049, 33.970909000749828 ], [ -118.317747000923305, 33.9709230004961 ], [ -118.317683999816722, 33.983864999270338 ], [ -118.321735000469857, 33.982140000660536 ], [ -118.317679999632219, 33.984398000467422 ], [ -118.317131000395307, 33.989101999757509 ], [ -118.317618999517208, 34.003689999793721 ], [ -118.34327799928019, 34.001357999272273 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 387, "objectid": 387, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90016", "zcta_key": "0690016", "latitude": 34.02876666, "longitude": -118.35456489000001, "tot_pop": 47596, "age_under5": 3405, "age_5to9": 3177, "age_10to14": 3429, "age_15to19": 3816, "age_20to24": 3497, "age_25to29": 3698, "age_30to34": 3605, "age_35to39": 3496, "age_40to44": 3496, "age_45to49": 3366, "age_50to54": 3172, "age_55to59": 2611, "age_60to64": 2061, "age_65to69": 1478, "age_70to74": 1136, "age_75to79": 834, "age_80to84": 654, "age_85_ove": 665, "age16_over": 36820, "age18_over": 35301, "age21_over": 33067, "age62_over": 5924, "age65_over": 4767, "male": 22778, "female": 24818, "age_median": 33.9, "age_medi_1": 31.8, "age_medi_2": 35.8, "one_race": 45221, "white": 11653, "black_afam": 17829, "amind_alan": 429, "asian": 1473, "nathaw_isl": 54, "other_race": 13783, "multi_race": 2375, "hispanic_l": 25462, "non_hisp_l": 22134, "white_nhl": 2127, "black_af_1": 17291, "amind_al_1": 103, "asian_nhl": 1434, "nathaw_i_1": 34, "other_nhl": 247, "multi_ra_1": 898, "tot_in_hou": 47318, "tot_in_gc": 278, "gc_inst": 116, "gc_noninst": 162, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 48, "gc_other": 68, "hh_total": 16145, "hh_family": 10731, "hh_nonfaml": 5414, "hh_nonfami": 4426, "hh_nonfa_1": 1871, "hh_nonfa_2": 485, "hh_nonfa_3": 2555, "hh_nonfa_4": 995, "hh_with_un": 6462, "hh_with_65": 3911, "hu_total": 17204, "hu_occ": 16145, "hu_vac": 1059, "hu_vac_ren": 549, "hu_vac_sea": 34, "hu_occ_own": 6079, "hu_occ_o_1": 19093, "hu_occ_ren": 10066, "hu_occ_r_1": 28225, "Shape_Length": 0.1598765878635709, "Shape_Area": 0.00090911329869145917, "InPoly_FID": 386, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.372626999236616, 34.018471000636225 ], [ -118.336317999376149, 34.018222999991508 ], [ -118.335311999748967, 34.016418999537223 ], [ -118.332900000034954, 34.018232000406556 ], [ -118.335098000672133, 34.022409999721788 ], [ -118.335101000810482, 34.032579000120791 ], [ -118.32973799990873, 34.039872000092771 ], [ -118.355084999672954, 34.041453000155911 ], [ -118.359035999311857, 34.039757000185489 ], [ -118.359392000440437, 34.041832000546435 ], [ -118.365714000600633, 34.039685999609219 ], [ -118.364792999497297, 34.042776000012452 ], [ -118.369801000215944, 34.040018999677159 ], [ -118.368791999551092, 34.038164999615105 ], [ -118.372649000251101, 34.035824999624083 ], [ -118.369576999778701, 34.035080000341793 ], [ -118.371900999931142, 34.029929000223206 ], [ -118.376220000352703, 34.028645999513344 ], [ -118.377951999285301, 34.021970000115459 ], [ -118.385227000225825, 34.019673999455563 ], [ -118.372626999236616, 34.018471000636225 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 1367, "objectid": 1367, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90019", "zcta_key": "0690019", "latitude": 34.04863838, "longitude": -118.33873623, "tot_pop": 64458, "age_under5": 4021, "age_5to9": 3616, "age_10to14": 3791, "age_15to19": 4204, "age_20to24": 4707, "age_25to29": 5628, "age_30to34": 5445, "age_35to39": 5172, "age_40to44": 4888, "age_45to49": 4685, "age_50to54": 4384, "age_55to59": 3827, "age_60to64": 3003, "age_65to69": 2178, "age_70to74": 1635, "age_75to79": 1178, "age_80to84": 1001, "age_85_ove": 1095, "age16_over": 52210, "age18_over": 50516, "age21_over": 47984, "age62_over": 8795, "age65_over": 7087, "male": 31442, "female": 33016, "age_median": 35.8, "age_medi_1": 34.4, "age_medi_2": 37.3, "one_race": 61350, "white": 19321, "black_afam": 15249, "amind_alan": 577, "asian": 10149, "nathaw_isl": 59, "other_race": 15995, "multi_race": 3108, "hispanic_l": 29701, "non_hisp_l": 34757, "white_nhl": 8068, "black_af_1": 14712, "amind_al_1": 113, "asian_nhl": 10047, "nathaw_i_1": 37, "other_nhl": 351, "multi_ra_1": 1429, "tot_in_hou": 63137, "tot_in_gc": 1321, "gc_inst": 873, "gc_noninst": 448, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 873, "gc_other": 0, "hh_total": 23344, "hh_family": 14063, "hh_nonfaml": 9281, "hh_nonfami": 6820, "hh_nonfa_1": 2945, "hh_nonfa_2": 562, "hh_nonfa_3": 3875, "hh_nonfa_4": 1261, "hh_with_un": 7668, "hh_with_65": 5126, "hu_total": 25116, "hu_occ": 23344, "hu_vac": 1772, "hu_vac_ren": 1152, "hu_vac_sea": 46, "hu_occ_own": 6266, "hu_occ_o_1": 17876, "hu_occ_ren": 17078, "hu_occ_r_1": 45261, "Shape_Length": 0.1745130989363316, "Shape_Area": 0.00098752742100272051, "InPoly_FID": 1366, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.353538999425268, 34.057385000117733 ], [ -118.354641999928333, 34.054198999784091 ], [ -118.354738999904896, 34.057409999471929 ], [ -118.363817999501066, 34.05818300004546 ], [ -118.364893999658307, 34.058305000275595 ], [ -118.370496999936563, 34.041409999971563 ], [ -118.369801000215944, 34.040018999677159 ], [ -118.364792999497297, 34.042776000012452 ], [ -118.365714000600633, 34.039685999609219 ], [ -118.359392000440437, 34.041832000546435 ], [ -118.359035999311857, 34.039757000185489 ], [ -118.355084999672954, 34.041453000155911 ], [ -118.32973799990873, 34.039872000092771 ], [ -118.308999000403503, 34.039938999585218 ], [ -118.309063999803698, 34.055846000192787 ], [ -118.318773999720293, 34.055129999549877 ], [ -118.327462000171124, 34.058516000113343 ], [ -118.327910000146346, 34.055255999964459 ], [ -118.330074000114962, 34.055868999454788 ], [ -118.3285210004438, 34.05916100018004 ], [ -118.338167000106921, 34.058980999973244 ], [ -118.339392999986899, 34.057063000557093 ], [ -118.353538999425268, 34.057385000117733 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 798, "objectid": 798, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90302", "zcta_key": "0690302", "latitude": 33.97474419, "longitude": -118.35550789, "tot_pop": 29415, "age_under5": 2194, "age_5to9": 2058, "age_10to14": 2161, "age_15to19": 2179, "age_20to24": 2375, "age_25to29": 2406, "age_30to34": 2338, "age_35to39": 2150, "age_40to44": 2157, "age_45to49": 2090, "age_50to54": 2080, "age_55to59": 1653, "age_60to64": 1334, "age_65to69": 817, "age_70to74": 577, "age_75to79": 381, "age_80to84": 227, "age_85_ove": 238, "age16_over": 22541, "age18_over": 21645, "age21_over": 20348, "age62_over": 2963, "age65_over": 2240, "male": 13803, "female": 15612, "age_median": 32.8, "age_medi_1": 31.3, "age_medi_2": 34.1, "one_race": 28099, "white": 5991, "black_afam": 14706, "amind_alan": 185, "asian": 371, "nathaw_isl": 74, "other_race": 6772, "multi_race": 1316, "hispanic_l": 12615, "non_hisp_l": 16800, "white_nhl": 1266, "black_af_1": 14297, "amind_al_1": 67, "asian_nhl": 345, "nathaw_i_1": 65, "other_nhl": 105, "multi_ra_1": 655, "tot_in_hou": 29225, "tot_in_gc": 190, "gc_inst": 142, "gc_noninst": 48, "gc_correct": 0, "gc_juv": 0, "gc_nurs": 142, "gc_other": 0, "hh_total": 10684, "hh_family": 6904, "hh_nonfaml": 3780, "hh_nonfami": 3070, "hh_nonfa_1": 1346, "hh_nonfa_2": 256, "hh_nonfa_3": 1724, "hh_nonfa_4": 439, "hh_with_un": 4288, "hh_with_65": 1811, "hu_total": 11431, "hu_occ": 10684, "hu_vac": 747, "hu_vac_ren": 511, "hu_vac_sea": 6, "hu_occ_own": 3197, "hu_occ_o_1": 9661, "hu_occ_ren": 7487, "hu_occ_r_1": 19564, "Shape_Length": 0.11146254019503947, "Shape_Area": 0.00049339713402151049, "InPoly_FID": 797, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -118.370231000260446, 33.979929000323182 ], [ -118.371496000140269, 33.967990999285234 ], [ -118.369849999777614, 33.963824000477302 ], [ -118.363287000194873, 33.966259999499414 ], [ -118.3536679999782, 33.965605999916988 ], [ -118.344049999807623, 33.971160000633574 ], [ -118.335210000441123, 33.974446999329587 ], [ -118.335185999334385, 33.981758000131663 ], [ -118.358544000005566, 33.981666999532479 ], [ -118.370340999937184, 33.981636000800847 ], [ -118.370231000260446, 33.979929000323182 ] ] ], [ [ [ -118.371805000000734, 33.98205799957708 ], [ -118.376770999681867, 33.982657000220456 ], [ -118.37446399941399, 33.979710000116484 ], [ -118.371801999862384, 33.979847000138989 ], [ -118.371805000000734, 33.98205799957708 ] ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 1618, "objectid": 1618, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90008", "zcta_key": "0690008", "latitude": 34.00960521, "longitude": -118.34706909000001, "tot_pop": 32327, "age_under5": 2068, "age_5to9": 1917, "age_10to14": 2021, "age_15to19": 2132, "age_20to24": 2050, "age_25to29": 2085, "age_30to34": 1973, "age_35to39": 2045, "age_40to44": 2254, "age_45to49": 2509, "age_50to54": 2384, "age_55to59": 2115, "age_60to64": 1832, "age_65to69": 1373, "age_70to74": 1181, "age_75to79": 916, "age_80to84": 715, "age_85_ove": 757, "age16_over": 25894, "age18_over": 25030, "age21_over": 23759, "age62_over": 5965, "age65_over": 4942, "male": 14477, "female": 17850, "age_median": 39.7, "age_medi_1": 36.5, "age_medi_2": 42.1, "one_race": 31069, "white": 2747, "black_afam": 22581, "amind_alan": 144, "asian": 829, "nathaw_isl": 30, "other_race": 4738, "multi_race": 1258, "hispanic_l": 7561, "non_hisp_l": 24766, "white_nhl": 731, "black_af_1": 22152, "amind_al_1": 63, "asian_nhl": 820, "nathaw_i_1": 24, "other_nhl": 173, "multi_ra_1": 803, "tot_in_hou": 32193, "tot_in_gc": 134, "gc_inst": 1, "gc_noninst": 133, "gc_correct": 0, "gc_juv": 1, "gc_nurs": 0, "gc_other": 0, "hh_total": 13841, "hh_family": 7696, "hh_nonfaml": 6145, "hh_nonfami": 5336, "hh_nonfa_1": 2023, "hh_nonfa_2": 572, "hh_nonfa_3": 3313, "hh_nonfa_4": 1343, "hh_with_un": 4102, "hh_with_65": 4073, "hu_total": 15006, "hu_occ": 13841, "hu_vac": 1165, "hu_vac_ren": 768, "hu_vac_sea": 24, "hu_occ_own": 4771, "hu_occ_o_1": 11566, "hu_occ_ren": 9070, "hu_occ_r_1": 20627, "Shape_Length": 0.1503187637418324, "Shape_Area": 0.00095130051517700704, "InPoly_FID": 1617, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.336317999376149, 34.018222999991508 ], [ -118.372626999236616, 34.018471000636225 ], [ -118.373093000041877, 34.011913000384709 ], [ -118.372864000273353, 34.004335999906516 ], [ -118.369448000125089, 33.998072000622358 ], [ -118.357888000330945, 33.997112000418554 ], [ -118.353523999632841, 34.002512000328579 ], [ -118.34327799928019, 34.001357999272273 ], [ -118.317618999517208, 34.003689999793721 ], [ -118.31709000030321, 34.017254000271919 ], [ -118.321325000448383, 34.018279999922129 ], [ -118.324139999861075, 34.01613199979198 ], [ -118.324142999999424, 34.018894999504653 ], [ -118.332900000034954, 34.018232000406556 ], [ -118.335311999748967, 34.016418999537223 ], [ -118.336317999376149, 34.018222999991508 ] ] ] } },
{ "type": "Feature", "properties": { "OBJECTID_1": 82, "objectid": 82, "cnty_fips": "", "county": "", "tract": "", "tract_id": "", "census_key": "", "zcta": "90062", "zcta_key": "0690062", "latitude": 34.00363839, "longitude": -118.30880632, "tot_pop": 32821, "age_under5": 2466, "age_5to9": 2384, "age_10to14": 2539, "age_15to19": 2991, "age_20to24": 2715, "age_25to29": 2456, "age_30to34": 2311, "age_35to39": 2202, "age_40to44": 2331, "age_45to49": 2304, "age_50to54": 2200, "age_55to59": 1690, "age_60to64": 1275, "age_65to69": 935, "age_70to74": 716, "age_75to79": 564, "age_80to84": 388, "age_85_ove": 354, "age16_over": 24830, "age18_over": 23636, "age21_over": 21870, "age62_over": 3657, "age65_over": 2957, "male": 15720, "female": 17101, "age_median": 31.8, "age_medi_1": 29.9, "age_medi_2": 33.7, "one_race": 31348, "white": 6955, "black_afam": 12420, "amind_alan": 275, "asian": 387, "nathaw_isl": 28, "other_race": 11283, "multi_race": 1473, "hispanic_l": 19373, "non_hisp_l": 13448, "white_nhl": 370, "black_af_1": 12024, "amind_al_1": 58, "asian_nhl": 368, "nathaw_i_1": 13, "other_nhl": 226, "multi_ra_1": 389, "tot_in_hou": 32528, "tot_in_gc": 293, "gc_inst": 17, "gc_noninst": 276, "gc_correct": 0, "gc_juv": 17, "gc_nurs": 0, "gc_other": 0, "hh_total": 9155, "hh_family": 6830, "hh_nonfaml": 2325, "hh_nonfami": 1909, "hh_nonfa_1": 777, "hh_nonfa_2": 224, "hh_nonfa_3": 1132, "hh_nonfa_4": 505, "hh_with_un": 4427, "hh_with_65": 2435, "hu_total": 9795, "hu_occ": 9155, "hu_vac": 640, "hu_vac_ren": 285, "hu_vac_sea": 16, "hu_occ_own": 3961, "hu_occ_o_1": 15996, "hu_occ_ren": 5194, "hu_occ_r_1": 16532, "Shape_Length": 0.09112663795216186, "Shape_Area": 0.00049156232955929486, "InPoly_FID": 81, "SimPgnFlag": 0, "MaxSimpTol": 0.0014473214335623029, "MinSimpTol": 0.0014473214335623029 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -118.300192999906983, 33.989109000080362 ], [ -118.300164999515061, 34.018177000568187 ], [ -118.31709000030321, 34.017254000271919 ], [ -118.317618999517208, 34.003689999793721 ], [ -118.317131000395307, 33.989101999757509 ], [ -118.300192999906983, 33.989109000080362 ] ] ] } }

    ]
};

// declare variables
let mapOptions = {'center': [34.065,-118.444],'zoom':12}

let zip1 = L.markerClusterGroup();
let zip2 = L.markerClusterGroup();
let zip3 = L.markerClusterGroup();
let zip4 = L.markerClusterGroup();
let zip5 = L.markerClusterGroup();
let zip6 = L.markerClusterGroup();
let zip7 = L.markerClusterGroup();
let zip8 = L.markerClusterGroup();
let zip9 = L.markerClusterGroup();

let liveZip = ""; 

let layers = {
    "90232": zip1,
    "90034": zip2, 
    "90230": zip3,
    "90056": zip4,
    "90043": zip5,
    "90016": zip6,
    "90019": zip7, 
    "90302": zip8,
    "90062": zip9
}

let circleOptions = {
    radius: 4,
    fillColor: "#ff7800",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
}

const dataUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQTR7i2UXl1U2jJIdL_L8F7W6240YGv7P1shmvWHM8hEaHMS1Zll0H9zRcg9UKcGRUik8wqO19qhDIJ/pub?output=csv"

// define the leaflet map
const map = L.map('the_map').setView(mapOptions.center, mapOptions.zoom);
L.geoJson(zips).addTo(map);
// add layer control box
L.control.layers(null,layers).addTo(map)

//map
let Esri_WorldGrayCanvas = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
    maxZoom: 16, 
});

Esri_WorldGrayCanvas.addTo(map);

function getColor(d) {
    return d > 1000 ? '#800026' :
           d > 500  ? '#BD0026' :
           d > 200  ? '#E31A1C' :
           d > 100  ? '#FC4E2A' :
           d > 50   ? '#FD8D3C' :
           d > 20   ? '#FEB24C' :
           d > 10   ? '#FED976' :
                      '#FFEDA0';
}
function style(feature) {
    return {
        fillColor: getColor(feature.properties.density),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}

L.geoJson(zips, {style: style}).addTo(map);

function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    layer.bringToFront();
}

function resetHighlight(e) {
    geojson.resetStyle(e.target);
}

function clickAZipCode(e) {
    map.fitBounds(e.target.getBounds()); 
    console.log(e.target.feature.properties["zcta"])
    liveZip = e.target.feature.properties["zcta"]; 
    console.log(liveZip)
}

function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: clickAZipCode, highlightFeature
    });
}

geojson = L.geoJson(zips, {
    style: style,
    onEachFeature: onEachFeature
}).addTo(map);



function addMarker(data){
    if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90232"){
        circleOptions.fillColor = "red"
        zip1.addLayer(L.circleMarker([data.lat,data.lng],circleOptions))
        }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90034") {
        circleOptions.fillColor = "red"
        zip2.addLayer(L.circleMarker([data.lat,data.lng],circleOptions))
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90230") {
        circleOptions.fillColor = "red"
        zip3.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90056") {
        circleOptions.fillColor = "red"
        zip4.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90043") {
        circleOptions.fillColor = "red"
        zip5.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90016") {
        circleOptions.fillColor = "red"
        zip6.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90019") {
        circleOptions.fillColor = "red"
        zip7.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90302") {
        circleOptions.fillColor = "red"
        zip8.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    else if(data['Please provide the zip code of your primary residence. / Por favor ingrese el còdigo postal de su residencia principal.'] == "90062") {
        circleOptions.fillColor = "red"
        zip9.addLayer(L.circleMarker([data.lat,data.lng],circleOptions)) 
    }
    // console.log("a")
    return data
}

function loadData(url){
    Papa.parse(url, {
        header: true,
        download: true,
        complete: results => processData(results)
    })
}

function processData(results){
    console.log(results)
    results.data.forEach(data => {
        console.log(data)
        addMarker(data)
        createStory(data.lat, data.lng, data)
    })
    zip1.addTo(map) // add our layers after markers have been made
    zip2.addTo(map) // add our layers after markers have been made  
    zip3.addTo(map) // add our layers after markers have been made
    zip4.addTo(map) // add our layers after markers have been made
    zip5.addTo(map) // add our layers after markers have been made
    zip6.addTo(map) // add our layers after markers have been made
    zip7.addTo(map) // add our layers after markers have been made
    zip8.addTo(map) // add our layers after markers have been made
    zip9.addTo(map) // add our layers after markers have been made

    let allLayers = L.featureGroup([zip1,zip2,zip3,zip4,zip5,zip6,zip7,zip8,zip9]);
    map.fitBounds(allLayers.getBounds());
}


function createStory(lat,lng,data){
    const item = document.createElement("list"); 
    item.id = "button"; 
    const itemspace = document.getElementById("stories");
    itemspace.appendChild(item); 
    let text1 = data["Please describe why you think this is the case."];
    let text2 = "Is there anything else you'd like to share? " + data["Is there anything else you would like to share about your experiences with oil drilling in Los Angeles?"];  
        item.innerHTML = `<p>${text1}</p>`; 
        item.innerHTML += "\n"; 
        item.innerHTML += `<li>${text2}</li>`; 
}

loadData(dataUrl)

function openTab(evt, tabname) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace("active", "");
    }
    document.getElementById(tabname).style.display = "block";
    evt.currentTarget.className += " active";
  }
  
  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
